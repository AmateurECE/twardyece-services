---
version: 1.0
configuration:
  - !top |
    upstream qbittorrent {
        keepalive 32;
        server public_qbittorrent:30000;
    }

  - !server
    name: twardyece
    configuration:
      - !location |
        location /qbittorrent {
            return 302 $scheme://$host/qbittorrent/;
        }

      - !location |
        location /qbittorrent/ {
            proxy_pass http://qbittorrent/;
            proxy_http_version 1.1;

            proxy_set_header Host twardyece_qbittorrent_1:30000;
            proxy_set_header X-Forwarded-Host $http_host;
            proxy_set_header X-Forwarded-For $remote_addr;

            proxy_cookie_path / "/; Secure";
        }
